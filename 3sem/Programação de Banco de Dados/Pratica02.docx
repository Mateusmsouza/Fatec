
CREATE TABLE FUNCIONARIO(
	FUN_COD_FUNC NUMBER(4), -- PK
	FUN_NOME VARCHAR2(100) NOT NULL,
	FUN_CPF VARCHAR2(15),
	FUN_SALARIO NUMBER(4,2),
	FUN_ENDERECO VARCHAR2(252),
	FUN_SEXO CHAR(1),
	FUN_COD_SUPER NUMBER(4), --FK
	FUN_COD_DEPART NUMBER(4), --FK

	CONSTRAINT FUNCPK PRIMARY KEY (FUN_COD_FUNC),
	CONSTRAINT UNQCPF UNIQUE (FUN_CPF),
	CONSTRAINT FUNSAL CHECK (FUN_SALARIO > 999.00),
	CONSTRAINT FUNSEX CHECK (FUN_SEXO IN ('M','F'))
);

CREATE TABLE DEPENDENTE(
	DEP_COD_FUNC NUMBER(4), --PK/FK
	DEP_SEQ NUMBER(4), --PK
	DEP_NOME VARCHAR2(100) NOT NULL,
	DEP_PARENTESCO VARCHAR2(30) NOT NULL,
	DEP_DATA_NASC DATE,

	CONSTRAINT DEPPK PRIMARY KEY (DEP_COD_FUNC, DEP_SEQ),
	CONSTRAINT DEP_COD_FK FOREIGN KEY (DEP_COD_FUNC) REFERENCES FUNCIONARIO(FUN_COD_FUNC),
	CONSTRAINT DEP_PAR CHECK (DEP_PARENTESCO IN  ('PAI','M√ÉE', 'IRMAOS','FILHO')) 

);

CREATE TABLE DEPARTAMENTO(
	DEPA_COD_DEPART NUMBER(4),
	DEPA_NOME_DEPART VARCHAR2(30) NOT NULL,
	DEPA_DATA_INICIAL DATE,
	CONSTRAINT DEPAPK PRIMARY KEY (DEPA_COD_DEPART)
);


CREATE TABLE LOCALIZACAO(
	LOC_COD_DEPART NUMBER(4),
	LOC_LOCAL VARCHAR2(252),
	CONSTRAINT LOCPK PRIMARY KEY (LOC_COD_DEPART, LOC_LOCAL),
	CONSTRAINT LOCFKDEPA FOREIGN KEY (LOC_COD_DEPART) REFERENCES DEPARTAMENTO(DEPA_COD_DEPART)
);
--
CREATE TABLE PROJETO(
	PROJ_COD_PROJ NUMBER(4),
	PROJ_COD_DEPART NUMBER(4) NOT NULL,
	PROJ_TITULO VARCHAR2(150) NOT NULL,
	PROJ_DESCRICAO VARCHAR2(252),
	PROJ_DATA_CAD DATE DEFAULT SYSDATE,
	CONSTRAINT PROPK PRIMARY KEY (PROJ_COD_PROJ),
	CONSTRAINT UNPROJ UNIQUE (PROJ_COD_DEPART)
);

CREATE TABLE PARTICIPA(
	PAR_COD_FUNC NUMBER(4),
	PAR_COD_PROJ NUMBER(4),
	PAR_HORAS VARCHAR2(50),
	CONSTRAINT PAPK PRIMARY KEY (PAR_COD_PROJ, PAR_COD_FUNC),
	CONSTRAINT PAFKFUN FOREIGN KEY (PAR_COD_FUNC) REFERENCES FUNCIONARIO(FUN_COD_FUNC),
	CONSTRAINT PAFKPR FOREIGN KEY (PAR_COD_PROJ) REFERENCES PROJETO(PROJ_COD_DEPART)
);

